import json

sumo_tz = salt['pillar.get']('sumologic:timezone', "America/Los_Angeles")
sources = salt['pillar.get']('sumologic:sources', {})

config = {
  api.version: "v1",
  collector: {
    collectorType: "Installable",
    description: "An installed collector",
    targetCPU: salt['pillar.get']('sumologic_install:targetCPU', 10)
  },
  sources: []
}

for sourcename,source in sources.iteritems():
  if source is mapping:
    tmp = {name: sourcename}
    for k,v in source.iteritems():
      tmp[k] = v
    config['sources'].append(tmp)

json.dumps(config, sort_keys=True, indent=4)
